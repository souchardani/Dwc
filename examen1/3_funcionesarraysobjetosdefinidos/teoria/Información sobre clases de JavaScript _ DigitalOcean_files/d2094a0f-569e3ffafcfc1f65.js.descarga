"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8700],{96391:function(e,t,r){r.d(t,{BU:function(){return withReact},CX:function(){return Editable},F3:function(){return en},mH:function(){return Slate}});var n=r(6907),a=r.n(n),o=r(23279),i=r.n(o),s=r(23493),l=r.n(s),d=r(67294),c=r(17423),u=r(77493),f=r(58354),h=r(18156),p=r(73935);function _objectWithoutProperties(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _defineProperty(e,t,r){var n;return n=function(e,t){if("object"!==_typeof(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==_typeof(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"===_typeof(n)?n:String(n))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var g=(0,d.createContext)(null),useSlateStatic=()=>{var e=(0,d.useContext)(g);if(!e)throw Error("The `useSlateStatic` hook must be used inside the <Slate> component's context.");return e},v=parseInt(d.version.split(".")[0],10),m="undefined"!=typeof navigator&&"undefined"!=typeof window&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,b="undefined"!=typeof navigator&&/Mac OS X/.test(navigator.userAgent),w="undefined"!=typeof navigator&&/Android/.test(navigator.userAgent),y="undefined"!=typeof navigator&&/^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent),M="undefined"!=typeof navigator&&/AppleWebKit(?!.*Chrome)/i.test(navigator.userAgent),D="undefined"!=typeof navigator&&/Edge?\/(?:[0-6][0-9]|[0-7][0-8])(?:\.)/i.test(navigator.userAgent),E="undefined"!=typeof navigator&&/Chrome/i.test(navigator.userAgent),O="undefined"!=typeof navigator&&/Chrome?\/(?:[0-7][0-5]|[0-6][0-9])(?:\.)/i.test(navigator.userAgent),S=w&&"undefined"!=typeof navigator&&/Chrome?\/(?:[0-5]?\d)(?:\.)/i.test(navigator.userAgent),x="undefined"!=typeof navigator&&/^(?!.*Seamonkey)(?=.*Firefox\/(?:[0-7][0-9]|[0-8][0-6])(?:\.)).*/i.test(navigator.userAgent),C="undefined"!=typeof navigator&&/.*UCBrowser/.test(navigator.userAgent),k="undefined"!=typeof navigator&&/.*Wechat/.test(navigator.userAgent)&&!/.*MacWechat/.test(navigator.userAgent),L=!!("undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement),P=(!O||!S)&&!D&&"undefined"!=typeof globalThis&&globalThis.InputEvent&&"function"==typeof globalThis.InputEvent.prototype.getTargetRanges,R=new WeakMap,T=new WeakMap,F=new WeakMap,B=new WeakMap,j=new WeakMap,N=new WeakMap,A=new WeakMap,W=new WeakMap,_=new WeakMap,$=new WeakMap,I=new WeakMap,q=new WeakMap,z=new WeakMap,K=new WeakMap,Y=new WeakMap,H=new WeakMap,V=new WeakMap,U=new WeakMap,Z=new WeakMap,X=new WeakMap,J=new WeakMap,G=Symbol("placeholder"),Q=Symbol("mark-placeholder"),ee=globalThis.Text,getDefaultView=e=>e&&e.ownerDocument&&e.ownerDocument.defaultView||null,isDOMComment=e=>isDOMNode(e)&&8===e.nodeType,isDOMElement=e=>isDOMNode(e)&&1===e.nodeType,isDOMNode=e=>{var t=getDefaultView(e);return!!t&&e instanceof t.Node},isDOMSelection=e=>{var t=e&&e.anchorNode&&getDefaultView(e.anchorNode);return!!t&&e instanceof t.Selection},isDOMText=e=>isDOMNode(e)&&3===e.nodeType,isPlainTextOnlyPaste=e=>e.clipboardData&&""!==e.clipboardData.getData("text/plain")&&1===e.clipboardData.types.length,normalizeDOMPoint=e=>{var[t,r]=e;if(isDOMElement(t)&&t.childNodes.length){var n=r===t.childNodes.length,a=n?r-1:r;for([t,a]=getEditableChildAndIndex(t,a,n?"backward":"forward"),n=a<r;isDOMElement(t)&&t.childNodes.length;){var o=n?t.childNodes.length-1:0;t=getEditableChild(t,o,n?"backward":"forward")}r=n&&null!=t.textContent?t.textContent.length:0}return[t,r]},hasShadowRoot=e=>{for(var t=e&&e.parentNode;t;){if("[object ShadowRoot]"===t.toString())return!0;t=t.parentNode}return!1},getEditableChildAndIndex=(e,t,r)=>{for(var{childNodes:n}=e,a=n[t],o=t,i=!1,s=!1;(isDOMComment(a)||isDOMElement(a)&&0===a.childNodes.length||isDOMElement(a)&&"false"===a.getAttribute("contenteditable"))&&(!i||!s);){if(o>=n.length){i=!0,o=t-1,r="backward";continue}if(o<0){s=!0,o=t+1,r="forward";continue}a=n[o],t=o,o+="forward"===r?1:-1}return[a,t]},getEditableChild=(e,t,r)=>{var[n]=getEditableChildAndIndex(e,t,r);return n},getPlainText=e=>{var t="";if(isDOMText(e)&&e.nodeValue)return e.nodeValue;if(isDOMElement(e)){for(var r of Array.from(e.childNodes))t+=getPlainText(r);var n=getComputedStyle(e).getPropertyValue("display");("block"===n||"list"===n||"BR"===e.tagName)&&(t+="\n")}return t},et=/data-slate-fragment="(.+?)"/m,getSlateFragmentAttribute=e=>{var[,t]=e.getData("text/html").match(et)||[];return t},isTrackedMutation=(e,t,r)=>{var{target:n}=t;if(isDOMElement(n)&&n.matches('[contentEditable="false"]'))return!1;var{document:a}=en.getWindow(e);if(a.contains(n))return en.hasDOMNode(e,n,{editable:!0});var o=r.find(e=>{var{addedNodes:t,removedNodes:r}=e;for(var a of t)if(a===n||a.contains(n))return!0;for(var o of r)if(o===n||o.contains(n))return!0});return!!o&&o!==t&&isTrackedMutation(e,o,r)},er=0;let Key=class Key{constructor(){_defineProperty(this,"id",void 0),this.id="".concat(er++)}};var en={androidPendingDiffs:e=>U.get(e),androidScheduleFlush:e=>{var t;null===(t=Y.get(e))||void 0===t||t()},blur:e=>{var t=en.toDOMNode(e,e),r=en.findDocumentOrShadowRoot(e);I.set(e,!1),r.activeElement===t&&t.blur()},deselect:e=>{var{selection:t}=e,r=en.findDocumentOrShadowRoot(e).getSelection();r&&r.rangeCount>0&&r.removeAllRanges(),t&&u.YR.deselect(e)},findDocumentOrShadowRoot:e=>{var t=en.toDOMNode(e,e),r=t.getRootNode();return(r instanceof Document||r instanceof ShadowRoot)&&null!=r.getSelection?r:t.ownerDocument},findEventRange:(e,t)=>{"nativeEvent"in t&&(t=t.nativeEvent);var r,{clientX:n,clientY:a,target:o}=t;if(null==n||null==a)throw Error("Cannot resolve a Slate range from a DOM event: ".concat(t));var i=en.toSlateNode(e,t.target),s=en.findPath(e,i);if(u.W_.isElement(i)&&u.ML.isVoid(e,i)){var l=o.getBoundingClientRect(),d=e.isInline(i)?n-l.left<l.left+l.width-n:a-l.top<l.top+l.height-a,c=u.ML.point(e,s,{edge:d?"start":"end"}),f=d?u.ML.before(e,c):u.ML.after(e,c);if(f)return u.ML.range(e,f)}var{document:h}=en.getWindow(e);if(h.caretRangeFromPoint)r=h.caretRangeFromPoint(n,a);else{var p=h.caretPositionFromPoint(n,a);p&&((r=h.createRange()).setStart(p.offsetNode,p.offset),r.setEnd(p.offsetNode,p.offset))}if(!r)throw Error("Cannot resolve a Slate range from a DOM event: ".concat(t));return en.toSlateRange(e,r,{exactMatch:!1,suppressThrow:!1})},findKey:(e,t)=>{var r=W.get(t);return r||(r=new Key,W.set(t,r)),r},findPath:(e,t)=>{for(var r=[],n=t;;){var a=T.get(n);if(null==a){if(u.ML.isEditor(n))return r;break}var o=R.get(n);if(null==o)break;r.unshift(o),n=a}throw Error("Unable to find the path for Slate node: ".concat(u.o4.stringify(t)))},focus:e=>{var t=en.toDOMNode(e,e),r=en.findDocumentOrShadowRoot(e);if(I.set(e,!0),r.activeElement!==t){if(e.selection&&r instanceof Document){var n=r.getSelection(),a=en.toDOMRange(e,e.selection);null==n||n.removeAllRanges(),null==n||n.addRange(a)}t.focus({preventScroll:!0})}},getWindow:e=>{var t=F.get(e);if(!t)throw Error("Unable to find a host window element for this editor");return t},hasDOMNode:function(e,t){var r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{editable:a=!1}=n,o=en.toDOMNode(e,e);try{r=isDOMElement(t)?t:t.parentElement}catch(e){if(e instanceof Error&&!e.message.includes('Permission denied to access property "nodeType"'))throw e}return!!r&&r.closest("[data-slate-editor]")===o&&(!a||!!r.isContentEditable||"boolean"==typeof r.isContentEditable&&r.closest('[contenteditable="false"]')===o||!!r.getAttribute("data-slate-zero-width"))},hasEditableTarget:(e,t)=>isDOMNode(t)&&en.hasDOMNode(e,t,{editable:!0}),hasRange:(e,t)=>{var{anchor:r,focus:n}=t;return u.ML.hasPath(e,r.path)&&u.ML.hasPath(e,n.path)},hasSelectableTarget:(e,t)=>en.hasEditableTarget(e,t)||en.isTargetInsideNonReadonlyVoid(e,t),hasTarget:(e,t)=>isDOMNode(t)&&en.hasDOMNode(e,t),insertData:(e,t)=>{e.insertData(t)},insertFragmentData:(e,t)=>e.insertFragmentData(t),insertTextData:(e,t)=>e.insertTextData(t),isComposing:e=>!!q.get(e),isFocused:e=>!!I.get(e),isReadOnly:e=>!!$.get(e),isTargetInsideNonReadonlyVoid:(e,t)=>{if($.get(e))return!1;var r=en.hasTarget(e,t)&&en.toSlateNode(e,t);return u.W_.isElement(r)&&u.ML.isVoid(e,r)},setFragmentData:(e,t,r)=>e.setFragmentData(t,r),toDOMNode:(e,t)=>{var r=_.get(e),n=u.ML.isEditor(t)?B.get(e):null==r?void 0:r.get(en.findKey(e,t));if(!n)throw Error("Cannot resolve a DOM node from Slate node: ".concat(u.o4.stringify(t)));return n},toDOMPoint:(e,t)=>{var[r]=u.ML.node(e,t.path),n=en.toDOMNode(e,r);u.ML.void(e,{at:t})&&(t={path:t.path,offset:0});for(var a=Array.from(n.querySelectorAll("[data-slate-string], [data-slate-zero-width]")),o=0,i=0;i<a.length;i++){var s=a[i],l=s.childNodes[0];if(null!=l&&null!=l.textContent){var{length:d}=l.textContent,c=s.getAttribute("data-slate-length"),f=o+(null==c?d:parseInt(c,10)),h=a[i+1];if(t.offset===f&&null!=h&&h.hasAttribute("data-slate-mark-placeholder")){var p,g,v=h.childNodes[0];p=[v instanceof ee?v:h,null!==(g=h.textContent)&&void 0!==g&&g.startsWith("\uFEFF")?1:0];break}if(t.offset<=f){p=[l,Math.min(d,Math.max(0,t.offset-o))];break}o=f}}if(!p)throw Error("Cannot resolve a DOM point from Slate point: ".concat(u.o4.stringify(t)));return p},toDOMRange:(e,t)=>{var{anchor:r,focus:n}=t,a=u.e6.isBackward(t),o=en.toDOMPoint(e,r),i=u.e6.isCollapsed(t)?o:en.toDOMPoint(e,n),s=en.getWindow(e).document.createRange(),[l,d]=a?i:o,[c,f]=a?o:i,h=!!(isDOMElement(l)?l:l.parentElement).getAttribute("data-slate-zero-width"),p=!!(isDOMElement(c)?c:c.parentElement).getAttribute("data-slate-zero-width");return s.setStart(l,h?1:d),s.setEnd(c,p?1:f),s},toSlateNode:(e,t)=>{var r=isDOMElement(t)?t:t.parentElement;r&&!r.hasAttribute("data-slate-node")&&(r=r.closest("[data-slate-node]"));var n=r?N.get(r):null;if(!n)throw Error("Cannot resolve a Slate node from DOM node: ".concat(r));return n},toSlatePoint:(e,t,r)=>{var{exactMatch:n,suppressThrow:a}=r,[o,i]=n?t:normalizeDOMPoint(t),s=o.parentNode,l=null,d=0;if(s){var c,f,h=en.toDOMNode(e,e),p=s.closest('[data-slate-void="true"]'),g=p&&h.contains(p)?p:null,v=s.closest("[data-slate-leaf]"),m=null;if(v){if(l=v.closest('[data-slate-node="text"]')){var b=en.getWindow(e).document.createRange();b.setStart(l,0),b.setEnd(o,i);var M=b.cloneContents();[...Array.prototype.slice.call(M.querySelectorAll("[data-slate-zero-width]")),...Array.prototype.slice.call(M.querySelectorAll("[contenteditable=false]"))].forEach(e=>{if(w&&!n&&e.hasAttribute("data-slate-zero-width")&&e.textContent.length>0&&"\uFEFF"!==e.textContext){e.textContent.startsWith("\uFEFF")&&(e.textContent=e.textContent.slice(1));return}e.parentNode.removeChild(e)}),d=M.textContent.length,m=l}}else if(g){for(var D=g.querySelectorAll("[data-slate-leaf]"),E=0;E<D.length;E++){var O=D[E];if(en.hasDOMNode(e,O)){v=O;break}}v?(l=v.closest('[data-slate-node="text"]'),d=(m=v).textContent.length,m.querySelectorAll("[data-slate-zero-width]").forEach(e=>{d-=e.textContent.length})):d=1}m&&d===m.textContent.length&&w&&"z"===m.getAttribute("data-slate-zero-width")&&null!==(c=m.textContent)&&void 0!==c&&c.startsWith("\uFEFF")&&(s.hasAttribute("data-slate-zero-width")||y&&null!==(f=m.textContent)&&void 0!==f&&f.endsWith("\n\n"))&&d--}if(w&&!l&&!n){var S=s.hasAttribute("data-slate-node")?s:s.closest("[data-slate-node]");if(S&&en.hasDOMNode(e,S,{editable:!0})){var x=en.toSlateNode(e,S),{path:C,offset:k}=u.ML.start(e,en.findPath(e,x));return S.querySelector("[data-slate-leaf]")||(k=i),{path:C,offset:k}}}if(!l){if(a)return null;throw Error("Cannot resolve a Slate point from DOM point: ".concat(t))}var L=en.toSlateNode(e,l);return{path:en.findPath(e,L),offset:d}},toSlateRange:(e,t,r)=>{var n,a,o,i,s,l,{exactMatch:d,suppressThrow:c}=r;if(isDOMSelection(t)?t.anchorNode:t.startContainer){if(isDOMSelection(t)){if(y&&t.rangeCount>1){o=t.focusNode;var f=t.getRangeAt(0),h=t.getRangeAt(t.rangeCount-1);if(o instanceof HTMLTableRowElement&&f.startContainer instanceof HTMLTableRowElement&&h.startContainer instanceof HTMLTableRowElement){function getLastChildren(e){return e.childElementCount>0?getLastChildren(e.children[0]):e}var p=f.startContainer,g=h.startContainer,v=getLastChildren(p.children[f.startOffset]),m=getLastChildren(g.children[h.startOffset]);i=0,n=m.childNodes.length>0?m.childNodes[0]:m,o=v.childNodes.length>0?v.childNodes[0]:v,a=m instanceof HTMLElement?m.innerHTML.length:0}else f.startContainer===o?(n=h.endContainer,a=h.endOffset,i=f.startOffset):(n=f.startContainer,a=f.endOffset,i=h.startOffset)}else n=t.anchorNode,a=t.anchorOffset,o=t.focusNode,i=t.focusOffset;s=E&&hasShadowRoot(n)||y?t.anchorNode===t.focusNode&&t.anchorOffset===t.focusOffset:t.isCollapsed}else n=t.startContainer,a=t.startOffset,o=t.endContainer,i=t.endOffset,s=t.collapsed}if(null==n||null==o||null==a||null==i)throw Error("Cannot resolve a Slate range from DOM range: ".concat(t));"getAttribute"in o&&"false"===o.getAttribute("contenteditable")&&"true"!==o.getAttribute("data-slate-void")&&(o=n,i=(null===(l=n.textContent)||void 0===l?void 0:l.length)||0);var b=en.toSlatePoint(e,[n,a],{exactMatch:d,suppressThrow:c});if(!b)return null;var w=s?b:en.toSlatePoint(e,[o,i],{exactMatch:d,suppressThrow:c});if(!w)return null;var M={anchor:b,focus:w};return u.e6.isExpanded(M)&&u.e6.isForward(M)&&isDOMElement(o)&&u.ML.void(e,{at:M.focus,mode:"highest"})&&(M=u.ML.unhangRange(e,M,{voids:!0})),M}};function applyStringDiff(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return r.reduce((e,t)=>e.slice(0,t.start)+t.text+e.slice(t.end),e)}function normalizeStringDiff(e,t){var{start:r,end:n,text:a}=t,o=e.slice(r,n),i=function(e,t){for(var r=Math.min(e.length,t.length),n=0;n<r;n++)if(e.charAt(n)!==t.charAt(n))return n;return r}(o,a),s=Math.min(o.length-i,a.length-i),l=function(e,t,r){for(var n=Math.min(e.length,t.length,r),a=0;a<n;a++)if(e.charAt(e.length-a-1)!==t.charAt(t.length-a-1))return a;return n}(o,a,s),d={start:r+i,end:n-l,text:a.slice(i,a.length-l)};return d.start===d.end&&0===d.text.length?null:d}function normalizePoint(e,t){var{path:r,offset:n}=t;if(!u.ML.hasPath(e,r))return null;var a=u.NB.get(e,r);if(!u.xv.isText(a))return null;var o=u.ML.above(e,{match:t=>u.W_.isElement(t)&&u.ML.isBlock(e,t),at:r});if(!o)return null;for(;n>a.text.length;){var i=u.ML.next(e,{at:r,match:u.xv.isText});if(!i||!u.y$.isDescendant(i[1],o[1]))return null;n-=a.text.length,a=i[0],r=i[1]}return{path:r,offset:n}}function normalizeRange(e,t){var r=normalizePoint(e,t.anchor);if(!r)return null;if(u.e6.isCollapsed(t))return{anchor:r,focus:r};var n=normalizePoint(e,t.focus);return n?{anchor:r,focus:n}:null}function transformPendingPoint(e,t,r){var n=U.get(e),a=null==n?void 0:n.find(e=>{var{path:r}=e;return u.y$.equals(r,t.path)});if(!a||t.offset<=a.diff.start)return u.E9.transform(t,r,{affinity:"backward"});var{diff:o}=a;if(t.offset<=o.start+o.text.length){var i={path:t.path,offset:o.start},s=u.E9.transform(i,r,{affinity:"backward"});return s?{path:s.path,offset:s.offset+t.offset-o.start}:null}var l={path:t.path,offset:t.offset-o.text.length+o.end-o.start},d=u.E9.transform(l,r,{affinity:"backward"});return d?"split_node"===r.type&&u.y$.equals(r.path,t.path)&&l.offset<r.position&&o.start<r.position?d:{path:d.path,offset:d.offset+o.text.length-o.end+o.start}:null}function transformPendingRange(e,t,r){var n=transformPendingPoint(e,t.anchor,r);if(!n)return null;if(u.e6.isCollapsed(t))return{anchor:n,focus:n};var a=transformPendingPoint(e,t.focus,r);return a?{anchor:n,focus:a}:null}function ownKeys$6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function _objectSpread$6(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys$6(Object(r),!0).forEach(function(t){_defineProperty(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys$6(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var debug=function(){},isDataTransfer=e=>(null==e?void 0:e.constructor.name)==="DataTransfer",ea=L?d.useLayoutEffect:d.useEffect,eo=["node"];function ownKeys$5(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}var ei={subtree:!0,childList:!0,characterData:!0},es=w?e=>{var t,{node:r}=e,n=_objectWithoutProperties(e,eo);if(!w)return null;var a=useSlateStatic(),o=(t=(0,d.useRef)(!1),(0,d.useEffect)(()=>(t.current=!0,()=>{t.current=!1}),[]),t.current),[i]=(0,d.useState)(()=>(function(e){var{editor:t,scheduleOnDOMSelectionChange:r,onDOMSelectionChange:n}=e,a=!1,o=null,i=null,s=null,l=0,d=!1,applyPendingSelection=()=>{var e=X.get(t);if(X.delete(t),e){var{selection:r}=t,n=normalizeRange(t,e);!n||r&&u.e6.equals(n,r)||u.YR.select(t,n)}},performAction=()=>{var e=Z.get(t);if(Z.delete(t),e){if(e.at){var r=u.E9.isPoint(e.at)?normalizePoint(t,e.at):normalizeRange(t,e.at);if(!r)return;var n=u.ML.range(t,r);t.selection&&u.e6.equals(t.selection,n)||u.YR.select(t,r)}e.run()}},flush=()=>{if(i&&(clearTimeout(i),i=null),s&&(clearTimeout(s),s=null),!hasPendingDiffs()&&!hasPendingAction()){applyPendingSelection();return}a||(a=!0,setTimeout(()=>a=!1)),hasPendingAction()&&(a="action");var e=t.selection&&u.ML.rangeRef(t,t.selection,{affinity:"forward"});V.set(t,t.marks),debug("flush",Z.get(t),U.get(t));for(var o=hasPendingDiffs();l=null===(c=U.get(t))||void 0===c?void 0:c[0];){var l,c,f,h=H.get(t);void 0!==h&&(H.delete(t),t.marks=h),h&&!1===d&&(d=null);var p=function(e){var{path:t,diff:r}=e;return{anchor:{path:t,offset:r.start},focus:{path:t,offset:r.end}}}(l);t.selection&&u.e6.equals(t.selection,p)||u.YR.select(t,p),l.diff.text?u.ML.insertText(t,l.diff.text):u.ML.deleteFragment(t),U.set(t,null===(f=U.get(t))||void 0===f?void 0:f.filter(e=>{var{id:t}=e;return t!==l.id})),!function(e,t){var{path:r,diff:n}=t;if(!u.ML.hasPath(e,r))return!1;var a=u.NB.get(e,r);if(!u.xv.isText(a))return!1;if(n.start!==a.text.length||0===n.text.length)return a.text.slice(n.start,n.start+n.text.length)===n.text;var o=u.y$.next(r);if(!u.ML.hasPath(e,o))return!1;var i=u.NB.get(e,o);return u.xv.isText(i)&&i.text.startsWith(n.text)}(t,l)&&(o=!1,Z.delete(t),V.delete(t),a="action",X.delete(t),r.cancel(),n.cancel(),null==e||e.unref())}var g=null==e?void 0:e.unref();if(!g||X.get(t)||t.selection&&u.e6.equals(g,t.selection)||u.YR.select(t,g),hasPendingAction()){performAction();return}o&&r(),r.flush(),n.flush(),applyPendingSelection();var v=V.get(t);V.delete(t),void 0!==v&&(t.marks=v,t.onChange())},updatePlaceholderVisibility=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=j.get(t);if(r){if(hasPendingDiffs()||e){r.style.display="none";return}r.style.removeProperty("display")}},storeDiff=(e,r)=>{var n,a,o,i,s,d,c,f,h=null!==(f=U.get(t))&&void 0!==f?f:[];U.set(t,h);var p=u.NB.leaf(t,e),g=h.findIndex(t=>u.y$.equals(t.path,e));if(g<0){normalizeStringDiff(p.text,r)&&h.push({path:e,diff:r,id:l++}),updatePlaceholderVisibility();return}var v=(n=p.text,o=Math.min((a=h[g].diff).start,r.start),i=Math.max(0,Math.min(a.start+a.text.length,r.end)-r.start),s=applyStringDiff(n,a,r),d=Math.max(r.start+r.text.length,a.start+a.text.length+(a.start+a.text.length>r.start?r.text.length:0)-i),c=s.slice(o,d),normalizeStringDiff(n,{start:o,end:Math.max(a.end,r.end-a.text.length+(a.end-a.start)),text:c}));if(!v){h.splice(g,1),updatePlaceholderVisibility();return}h[g]=_objectSpread$6(_objectSpread$6({},h[g]),{},{diff:v})},scheduleAction=function(e){var{at:a}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};d=!1,X.delete(t),r.cancel(),n.cancel(),hasPendingAction()&&flush(),Z.set(t,{at:a,run:e}),s=setTimeout(flush)},hasPendingAction=()=>!!Z.get(t),hasPendingDiffs=()=>{var e;return!!(null!==(e=U.get(t))&&void 0!==e&&e.length)},handleUserSelect=e=>{X.set(t,e),i&&(clearTimeout(i),i=null);var{selection:r}=t;if(e){var n=!r||!u.y$.equals(r.anchor.path,e.anchor.path),a=!r||!u.y$.equals(r.anchor.path.slice(0,-1),e.anchor.path.slice(0,-1));(n&&d||a)&&(d=!1),(n||hasPendingDiffs())&&(i=setTimeout(flush,200))}},scheduleFlush=()=>{hasPendingAction()||(s=setTimeout(flush))};return{flush,scheduleFlush,hasPendingDiffs,hasPendingAction,hasPendingChanges:()=>hasPendingAction()||hasPendingDiffs(),isFlushing:()=>a,handleUserSelect,handleCompositionEnd:e=>{o&&clearTimeout(o),o=setTimeout(()=>{q.set(t,!1),flush()},25)},handleCompositionStart:e=>{q.set(t,!0),o&&(clearTimeout(o),o=null)},handleDOMBeforeInput:e=>{i&&(clearTimeout(i),i=null);var{inputType:r}=e,n=null,a=e.dataTransfer||e.data||void 0;!1!==d&&"insertText"!==r&&"insertCompositionText"!==r&&(d=!1);var[o]=e.getTargetRanges();o&&(n=en.toSlateRange(t,o,{exactMatch:!1,suppressThrow:!0}));var s=en.getWindow(t).getSelection();if(!n&&s&&(o=s,n=en.toSlateRange(t,s,{exactMatch:!1,suppressThrow:!0})),n=null!==(x=n)&&void 0!==x?x:t.selection){var l=!0;if(r.startsWith("delete")){if(u.e6.isExpanded(n)){var[c,f]=u.e6.edges(n);if(u.NB.leaf(t,c.path).text.length===c.offset&&0===f.offset){var h=u.ML.next(t,{at:c.path,match:u.xv.isText});h&&u.y$.equals(h[1],f.path)&&(n={anchor:f,focus:f})}}var p=r.endsWith("Backward")?"backward":"forward",[g,v]=u.e6.edges(n),[m,b]=u.ML.leaf(t,g.path),w={text:"",start:g.offset,end:v.offset},y=U.get(t),M=null==y?void 0:y.find(e=>u.y$.equals(e.path,b)),D=M?[M.diff,w]:[w];if(0===applyStringDiff(m.text,...D).length&&(l=!1),u.e6.isExpanded(n)){if(l&&u.y$.equals(n.anchor.path,n.focus.path)){var E={path:n.anchor.path,offset:g.offset};return handleUserSelect(u.ML.range(t,E,E)),storeDiff(n.anchor.path,{text:"",end:v.offset,start:g.offset})}return scheduleAction(()=>u.ML.deleteFragment(t,{direction:p}),{at:n})}}switch(r){case"deleteByComposition":case"deleteByCut":case"deleteByDrag":return scheduleAction(()=>u.ML.deleteFragment(t),{at:n});case"deleteContent":case"deleteContentForward":var{anchor:O}=n;if(l&&u.e6.isCollapsed(n)){var S=u.NB.leaf(t,O.path);if(O.offset<S.text.length)return storeDiff(O.path,{text:"",start:O.offset,end:O.offset+1})}return scheduleAction(()=>u.ML.deleteForward(t),{at:n});case"deleteContentBackward":var x,C,{anchor:k}=n,L=isDOMSelection(o)?o.isCollapsed:!!(null!==(C=o)&&void 0!==C&&C.collapsed);if(l&&L&&u.e6.isCollapsed(n)&&k.offset>0)return storeDiff(k.path,{text:"",start:k.offset-1,end:k.offset});return scheduleAction(()=>u.ML.deleteBackward(t),{at:n});case"deleteEntireSoftLine":return scheduleAction(()=>{u.ML.deleteBackward(t,{unit:"line"}),u.ML.deleteForward(t,{unit:"line"})},{at:n});case"deleteHardLineBackward":return scheduleAction(()=>u.ML.deleteBackward(t,{unit:"block"}),{at:n});case"deleteSoftLineBackward":return scheduleAction(()=>u.ML.deleteBackward(t,{unit:"line"}),{at:n});case"deleteHardLineForward":return scheduleAction(()=>u.ML.deleteForward(t,{unit:"block"}),{at:n});case"deleteSoftLineForward":return scheduleAction(()=>u.ML.deleteForward(t,{unit:"line"}),{at:n});case"deleteWordBackward":return scheduleAction(()=>u.ML.deleteBackward(t,{unit:"word"}),{at:n});case"deleteWordForward":return scheduleAction(()=>u.ML.deleteForward(t,{unit:"word"}),{at:n});case"insertLineBreak":return scheduleAction(()=>u.ML.insertSoftBreak(t),{at:n});case"insertParagraph":return scheduleAction(()=>u.ML.insertBreak(t),{at:n});case"insertCompositionText":case"deleteCompositionText":case"insertFromComposition":case"insertFromDrop":case"insertFromPaste":case"insertFromYank":case"insertReplacementText":case"insertText":if(isDataTransfer(a))return scheduleAction(()=>en.insertData(t,a),{at:n});var P=null!=a?a:"";if(H.get(t)&&(P=P.replace("\uFEFF","")),"insertText"===r&&/.*\n.*\n$/.test(P)&&(P=P.slice(0,-1)),P.includes("\n"))return scheduleAction(()=>{var e=P.split("\n");e.forEach((r,n)=>{r&&u.ML.insertText(t,r),n!==e.length-1&&u.ML.insertSoftBreak(t)})},{at:n});if(u.y$.equals(n.anchor.path,n.focus.path)){var[R,T]=u.e6.edges(n),F={start:R.offset,end:T.offset,text:P};if(P&&d&&"insertCompositionText"===r){var B=d.start+d.text.search(/\S|$/);F.start+F.text.search(/\S|$/)===B+1&&F.end===d.start+d.text.length?(F.start-=1,d=null,scheduleFlush()):d=!1}else d="insertText"===r&&(null===d?F:!!(d&&u.e6.isCollapsed(n))&&d.end+d.text.length===R.offset&&_objectSpread$6(_objectSpread$6({},d),{},{text:d.text+P}));if(l){storeDiff(R.path,F);return}}return scheduleAction(()=>u.ML.insertText(t,P),{at:n})}}},handleKeyDown:e=>{hasPendingDiffs()||(updatePlaceholderVisibility(!0),setTimeout(updatePlaceholderVisibility))},handleDomMutations:e=>{if(!(hasPendingDiffs()||hasPendingAction())&&e.some(r=>isTrackedMutation(t,r,e))){var r;null===(r=J.get(t))||void 0===r||r()}},handleInput:()=>{(hasPendingAction()||!hasPendingDiffs())&&flush()}}})(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys$5(Object(r),!0).forEach(function(t){_defineProperty(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys$5(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({editor:a},n)));return!function(e,t,r){var[n]=(0,d.useState)(()=>new MutationObserver(t));ea(()=>{n.takeRecords()}),(0,d.useEffect)(()=>{if(!e.current)throw Error("Failed to attach MutationObserver, `node` is undefined");return n.observe(e.current,r),()=>n.disconnect()},[n,e,r])}(r,i.handleDomMutations,ei),Y.set(a,i.scheduleFlush),o&&i.flush(),i}:()=>null,el=["anchor","focus"],ed=["anchor","focus"],shallowCompare=(e,t)=>Object.keys(e).length===Object.keys(t).length&&Object.keys(e).every(r=>t.hasOwnProperty(r)&&e[r]===t[r]),isDecorationFlagsEqual=(e,t)=>{var r=_objectWithoutProperties(e,el),n=_objectWithoutProperties(t,ed);return e[G]===t[G]&&shallowCompare(r,n)},isElementDecorationsEqual=(e,t)=>{if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++){var n=e[r],a=t[r];if(!u.e6.equals(n,a)||!isDecorationFlagsEqual(n,a))return!1}return!0},isTextDecorationsEqual=(e,t)=>{if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++){var n=e[r],a=t[r];if(n.anchor.offset!==a.anchor.offset||n.focus.offset!==a.focus.offset||!isDecorationFlagsEqual(n,a))return!1}return!0};function ownKeys$4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}var String$1=e=>{var{isLast:t,leaf:r,parent:n,text:a}=e,o=useSlateStatic(),i=en.findPath(o,a),s=u.y$.parent(i),l=!!r[Q];return o.isVoid(n)?d.createElement(ZeroWidthString,{length:u.NB.string(n).length}):""!==r.text||n.children[n.children.length-1]!==a||o.isInline(n)||""!==u.ML.string(o,s)?""===r.text?d.createElement(ZeroWidthString,{isMarkPlaceholder:l}):t&&"\n"===r.text.slice(-1)?d.createElement(TextString,{isTrailing:!0,text:r.text}):d.createElement(TextString,{text:r.text}):d.createElement(ZeroWidthString,{isLineBreak:!0,isMarkPlaceholder:l})},TextString=e=>{var{text:t,isTrailing:r=!1}=e,n=(0,d.useRef)(null),getTextContent=()=>"".concat(null!=t?t:"").concat(r?"\n":""),[a]=(0,d.useState)(getTextContent);return ea(()=>{var e=getTextContent();n.current&&n.current.textContent!==e&&(n.current.textContent=e)}),d.createElement(ec,{ref:n},a)},ec=(0,d.memo)((0,d.forwardRef)((e,t)=>d.createElement("span",{"data-slate-string":!0,ref:t},e.children))),ZeroWidthString=e=>{var{length:t=0,isLineBreak:r=!1,isMarkPlaceholder:n=!1}=e,a={"data-slate-zero-width":r?"n":"z","data-slate-length":t};return n&&(a["data-slate-mark-placeholder"]=!0),d.createElement("span",function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys$4(Object(r),!0).forEach(function(t){_defineProperty(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys$4(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},a),w&&r?null:"\uFEFF",r?d.createElement("br",null):null)};function ownKeys$3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function _objectSpread$3(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys$3(Object(r),!0).forEach(function(t){_defineProperty(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys$3(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function clearTimeoutRef(e){e.current&&(clearTimeout(e.current),e.current=null)}var eu=d.memo(e=>{var{leaf:t,isLast:r,text:n,parent:a,renderPlaceholder:o,renderLeaf:i=e=>d.createElement(DefaultLeaf,_objectSpread$3({},e))}=e,s=useSlateStatic(),l=(0,d.useRef)(null),c=(0,d.useRef)(null),[u,h]=(0,d.useState)(!1),p=(0,d.useRef)(null),g=(0,d.useCallback)(e=>{if(r=null==e,l.current&&(l.current.disconnect(),r&&(l.current=null)),null==e)j.delete(s),null===(n=t.onPlaceholderResize)||void 0===n||n.call(t,null);else{if(j.set(s,e),!l.current){var r,n,a=window.ResizeObserver||f.do;l.current=new a(()=>{var r;null===(r=t.onPlaceholderResize)||void 0===r||r.call(t,e)})}l.current.observe(e),c.current=e}},[c,t,s]),v=d.createElement(String$1,{isLast:r,leaf:t,parent:a,text:n}),m=!!t[G];if((0,d.useEffect)(()=>(m?p.current||(p.current=setTimeout(()=>{h(!0),p.current=null},300)):(clearTimeoutRef(p),h(!1)),()=>clearTimeoutRef(p)),[m,h]),m&&u){var b={children:t.placeholder,attributes:{"data-slate-placeholder":!0,style:{position:"absolute",top:0,pointerEvents:"none",width:"100%",maxWidth:"100%",display:"block",opacity:"0.333",userSelect:"none",textDecoration:"none",WebkitUserModify:M?"inherit":void 0},contentEditable:!1,ref:g}};v=d.createElement(d.Fragment,null,o(b),v)}return i({attributes:{"data-slate-leaf":!0},children:v,leaf:t,text:n})},(e,t)=>t.parent===e.parent&&t.isLast===e.isLast&&t.renderLeaf===e.renderLeaf&&t.renderPlaceholder===e.renderPlaceholder&&t.text===e.text&&u.xv.equals(t.leaf,e.leaf)&&t.leaf[G]===e.leaf[G]),DefaultLeaf=e=>{var{attributes:t,children:r}=e;return d.createElement("span",_objectSpread$3({},t),r)},ef=d.memo(e=>{for(var{decorations:t,isLast:r,parent:n,renderPlaceholder:a,renderLeaf:o,text:i}=e,s=useSlateStatic(),l=(0,d.useRef)(null),c=u.xv.decorations(i,t),f=en.findKey(s,i),h=[],p=0;p<c.length;p++){var g=c[p];h.push(d.createElement(eu,{isLast:r&&p===c.length-1,key:"".concat(f.id,"-").concat(p),renderPlaceholder:a,leaf:g,text:i,parent:n,renderLeaf:o}))}var v=(0,d.useCallback)(e=>{var t=_.get(s);e?(null==t||t.set(f,e),A.set(i,e),N.set(e,i)):(null==t||t.delete(f),A.delete(i),l.current&&N.delete(l.current)),l.current=e},[l,s,f,i]);return d.createElement("span",{"data-slate-node":"text",ref:v},h)},(e,t)=>t.parent===e.parent&&t.isLast===e.isLast&&t.renderLeaf===e.renderLeaf&&t.renderPlaceholder===e.renderPlaceholder&&t.text===e.text&&isTextDecorationsEqual(t.decorations,e.decorations));function ownKeys$2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function _objectSpread$2(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys$2(Object(r),!0).forEach(function(t){_defineProperty(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys$2(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var eh=d.memo(e=>{var{decorations:t,element:r,renderElement:n=e=>d.createElement(DefaultElement,_objectSpread$2({},e)),renderPlaceholder:o,renderLeaf:i,selection:s}=e,l=useSlateStatic(),c=useReadOnly(),f=l.isInline(r),h=en.findKey(l,r),p=(0,d.useCallback)(e=>{var t=_.get(l);e?(null==t||t.set(h,e),A.set(r,e),N.set(e,r)):(null==t||t.delete(h),A.delete(r))},[l,h,r]),g=useChildren({decorations:t,node:r,renderElement:n,renderPlaceholder:o,renderLeaf:i,selection:s}),v={"data-slate-node":"element",ref:p};if(f&&(v["data-slate-inline"]=!0),!f&&u.ML.hasInlines(l,r)){var m=u.NB.string(r),b=a()(m);"rtl"===b&&(v.dir=b)}if(u.ML.isVoid(l,r)){v["data-slate-void"]=!0,!c&&f&&(v.contentEditable=!1);var[[w]]=u.NB.texts(r);g=d.createElement(f?"span":"div",{"data-slate-spacer":!0,style:{height:"0",color:"transparent",outline:"none",position:"absolute"}},d.createElement(ef,{renderPlaceholder:o,decorations:[],isLast:!1,parent:r,text:w})),R.set(w,0),T.set(w,r)}return n({attributes:v,children:g,element:r})},(e,t)=>e.element===t.element&&e.renderElement===t.renderElement&&e.renderLeaf===t.renderLeaf&&e.renderPlaceholder===t.renderPlaceholder&&isElementDecorationsEqual(e.decorations,t.decorations)&&(e.selection===t.selection||!!e.selection&&!!t.selection&&u.e6.equals(e.selection,t.selection))),DefaultElement=e=>{var{attributes:t,children:r,element:n}=e,a=useSlateStatic().isInline(n)?"span":"div";return d.createElement(a,_objectSpread$2(_objectSpread$2({},t),{},{style:{position:"relative"}}),r)},ep=(0,d.createContext)(()=>[]),useDecorate=()=>(0,d.useContext)(ep),eg=(0,d.createContext)(!1),useChildren=e=>{for(var{decorations:t,node:r,renderElement:n,renderPlaceholder:a,renderLeaf:o,selection:i}=e,s=useDecorate(),l=useSlateStatic(),c=en.findPath(l,r),f=[],h=u.W_.isElement(r)&&!l.isInline(r)&&u.ML.hasInlines(l,r),p=0;p<r.children.length;p++){var g=c.concat(p),v=r.children[p],m=en.findKey(l,v),b=u.ML.range(l,g),w=i&&u.e6.intersection(b,i),y=s([v,g]);for(var M of t){var D=u.e6.intersection(M,b);D&&y.push(D)}u.W_.isElement(v)?f.push(d.createElement(eg.Provider,{key:"provider-".concat(m.id),value:!!w},d.createElement(eh,{decorations:y,element:v,key:m.id,renderElement:n,renderPlaceholder:a,renderLeaf:o,selection:w}))):f.push(d.createElement(ef,{decorations:y,key:m.id,isLast:h&&p===r.children.length-1,parent:r,renderPlaceholder:a,renderLeaf:o,text:v})),R.set(v,p),T.set(v,r)}return f},ev=(0,d.createContext)(!1),useReadOnly=()=>(0,d.useContext)(ev),em=(0,d.createContext)(null),useSlate=()=>{var e=(0,d.useContext)(em);if(!e)throw Error("The `useSlate` hook must be used inside the <Slate> component's context.");var{editor:t}=e;return t},eb={bold:"mod+b",compose:["down","left","right","up","backspace","enter"],moveBackward:"left",moveForward:"right",moveWordBackward:"ctrl+left",moveWordForward:"ctrl+right",deleteBackward:"shift?+backspace",deleteForward:"shift?+delete",extendBackward:"shift+left",extendForward:"shift+right",italic:"mod+i",insertSoftBreak:"shift+enter",splitBlock:"enter",undo:"mod+z"},ew={moveLineBackward:"opt+up",moveLineForward:"opt+down",moveWordBackward:"opt+left",moveWordForward:"opt+right",deleteBackward:["ctrl+backspace","ctrl+h"],deleteForward:["ctrl+delete","ctrl+d"],deleteLineBackward:"cmd+shift?+backspace",deleteLineForward:["cmd+shift?+delete","ctrl+k"],deleteWordBackward:"opt+shift?+backspace",deleteWordForward:"opt+shift?+delete",extendLineBackward:"opt+shift+up",extendLineForward:"opt+shift+down",redo:"cmd+shift+z",transposeCharacter:"ctrl+t"},ey={deleteWordBackward:"ctrl+shift?+backspace",deleteWordForward:"ctrl+shift?+delete",redo:["ctrl+y","ctrl+shift+z"]},create=e=>{var t=eb[e],r=ew[e],n=ey[e],a=t&&(0,h.P6)(t),o=r&&(0,h.P6)(r),i=n&&(0,h.P6)(n);return e=>!!(a&&a(e)||b&&o&&o(e)||!b&&i&&i(e))},eM={isBold:create("bold"),isCompose:create("compose"),isMoveBackward:create("moveBackward"),isMoveForward:create("moveForward"),isDeleteBackward:create("deleteBackward"),isDeleteForward:create("deleteForward"),isDeleteLineBackward:create("deleteLineBackward"),isDeleteLineForward:create("deleteLineForward"),isDeleteWordBackward:create("deleteWordBackward"),isDeleteWordForward:create("deleteWordForward"),isExtendBackward:create("extendBackward"),isExtendForward:create("extendForward"),isExtendLineBackward:create("extendLineBackward"),isExtendLineForward:create("extendLineForward"),isItalic:create("italic"),isMoveLineBackward:create("moveLineBackward"),isMoveLineForward:create("moveLineForward"),isMoveWordBackward:create("moveWordBackward"),isMoveWordForward:create("moveWordForward"),isRedo:create("redo"),isSoftBreak:create("insertSoftBreak"),isSplitBlock:create("splitBlock"),isTransposeCharacter:create("transposeCharacter"),isUndo:create("undo")},createRestoreDomManager=(e,t)=>{var r=[],clear=()=>{r=[]};return{registerMutations:n=>{if(t.current){var a=n.filter(t=>isTrackedMutation(e,t,n));r.push(...a)}},restoreDOM:function(){r.length>0&&(r.reverse().forEach(e=>{"characterData"!==e.type&&(e.removedNodes.forEach(t=>{e.target.insertBefore(t,e.nextSibling)}),e.addedNodes.forEach(t=>{e.target.removeChild(t)}))}),clear())},clear}},eD={subtree:!0,childList:!0,characterData:!0,characterDataOldValue:!0};let RestoreDOMComponent=class RestoreDOMComponent extends d.Component{constructor(){super(...arguments),_defineProperty(this,"context",null),_defineProperty(this,"manager",null),_defineProperty(this,"mutationObserver",null)}observe(){var e,{node:t}=this.props;if(!t.current)throw Error("Failed to attach MutationObserver, `node` is undefined");null===(e=this.mutationObserver)||void 0===e||e.observe(t.current,eD)}componentDidMount(){var{receivedUserInput:e}=this.props,t=this.context;this.manager=createRestoreDomManager(t,e),this.mutationObserver=new MutationObserver(this.manager.registerMutations),this.observe()}getSnapshotBeforeUpdate(){var e,t,r,n,a=null===(e=this.mutationObserver)||void 0===e?void 0:e.takeRecords();return null!=a&&a.length&&(null===(n=this.manager)||void 0===n||n.registerMutations(a)),null===(t=this.mutationObserver)||void 0===t||t.disconnect(),null===(r=this.manager)||void 0===r||r.restoreDOM(),null}componentDidUpdate(){var e;null===(e=this.manager)||void 0===e||e.clear(),this.observe()}componentWillUnmount(){var e;null===(e=this.mutationObserver)||void 0===e||e.disconnect()}render(){return this.props.children}};_defineProperty(RestoreDOMComponent,"contextType",g);var eE=w?RestoreDOMComponent:e=>{var{children:t}=e;return d.createElement(d.Fragment,null,t)},eO=["autoFocus","decorate","onDOMBeforeInput","placeholder","readOnly","renderElement","renderLeaf","renderPlaceholder","scrollSelectionIntoView","style","as","disableDefaultStyles"],eS=["text"];function ownKeys$1(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function _objectSpread$1(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys$1(Object(r),!0).forEach(function(t){_defineProperty(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys$1(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var Children=e=>d.createElement(d.Fragment,null,useChildren(e)),Editable=e=>{var t,r,n,o,s=(0,d.useCallback)(e=>d.createElement(DefaultPlaceholder,_objectSpread$1({},e)),[]),{autoFocus:c,decorate:f=defaultDecorate,onDOMBeforeInput:h,placeholder:p,readOnly:g=!1,renderElement:v,renderLeaf:b,renderPlaceholder:D=s,scrollSelectionIntoView:O=defaultScrollSelectionIntoView,style:S={},as:R="div",disableDefaultStyles:T=!1}=e,j=_objectWithoutProperties(e,eO),W=useSlate(),[_,K]=(0,d.useState)(!1),Y=(0,d.useRef)(null),U=(0,d.useRef)([]),[Z,X]=(0,d.useState)(),{onUserInput:ee,receivedUserInput:et}=(t=useSlateStatic(),r=(0,d.useRef)(!1),n=(0,d.useRef)(0),o=(0,d.useCallback)(()=>{if(!r.current){r.current=!0;var e=en.getWindow(t);e.cancelAnimationFrame(n.current),n.current=e.requestAnimationFrame(()=>{r.current=!1})}},[t]),(0,d.useEffect)(()=>()=>cancelAnimationFrame(n.current),[]),{receivedUserInput:r,onUserInput:o}),[,er]=(0,d.useReducer)(e=>e+1,0);J.set(W,er),$.set(W,g);var eo=(0,d.useMemo)(()=>({isDraggingInternally:!1,isUpdatingSelection:!1,latestElement:null,hasMarkPlaceholder:!1}),[]);(0,d.useEffect)(()=>{Y.current&&c&&Y.current.focus()},[c]);var ei=(0,d.useRef)(),el=(0,d.useMemo)(()=>l()(()=>{var e=ei.current;if((w||!en.isComposing(W))&&(!eo.isUpdatingSelection||null!=e&&e.isFlushing())&&!eo.isDraggingInternally){var t=en.findDocumentOrShadowRoot(W),{activeElement:r}=t,n=en.toDOMNode(W,W),a=t.getSelection();if(r===n?(eo.latestElement=r,I.set(W,!0)):I.delete(W),!a)return u.YR.deselect(W);var{anchorNode:o,focusNode:i}=a,s=en.hasEditableTarget(W,o)||en.isTargetInsideNonReadonlyVoid(W,o),l=en.hasEditableTarget(W,i)||en.isTargetInsideNonReadonlyVoid(W,i);if(s&&l){var d=en.toSlateRange(W,a,{exactMatch:!1,suppressThrow:!0});d&&(en.isComposing(W)||null!=e&&e.hasPendingChanges()||null!=e&&e.isFlushing()?null==e||e.handleUserSelect(d):u.YR.select(W,d))}!g||s&&l||u.YR.deselect(W)}},100),[W,g,eo]),ed=(0,d.useMemo)(()=>i()(el,0),[el]);ei.current=es({node:Y,onDOMSelectionChange:el,scheduleOnDOMSelectionChange:ed}),ea(()=>{Y.current&&(r=getDefaultView(Y.current))?(F.set(W,r),B.set(W,Y.current),A.set(W,Y.current),N.set(Y.current,W)):A.delete(W);var e,t,r,{selection:n}=W,a=en.findDocumentOrShadowRoot(W).getSelection();if(!(!a||!en.isFocused(W)||null!==(e=ei.current)&&void 0!==e&&e.hasPendingAction())){var setDomSelection=e=>{var t="None"!==a.type;if(n||t){var r=a.focusNode;if(y&&a.rangeCount>1){var o=a.getRangeAt(0),i=a.getRangeAt(a.rangeCount-1);d=o.startContainer===r?i.endContainer:o.startContainer}else d=a.anchorNode;var s=B.get(W),l=!1;if(s.contains(d)&&s.contains(r)&&(l=!0),t&&l&&n&&!e){var d,c,f=en.toSlateRange(W,a,{exactMatch:!0,suppressThrow:!0});if(f&&u.e6.equals(f,n)&&(!eo.hasMarkPlaceholder||null!==(c=d)&&void 0!==c&&null!==(c=c.parentElement)&&void 0!==c&&c.hasAttribute("data-slate-mark-placeholder")))return}if(n&&!en.hasRange(W,n)){W.selection=en.toSlateRange(W,a,{exactMatch:!1,suppressThrow:!0});return}eo.isUpdatingSelection=!0;var h=n&&en.toDOMRange(W,n);return h?(en.isComposing(W)&&!w?a.collapseToEnd():u.e6.isBackward(n)?a.setBaseAndExtent(h.endContainer,h.endOffset,h.startContainer,h.startOffset):a.setBaseAndExtent(h.startContainer,h.startOffset,h.endContainer,h.endOffset),O(W,h)):a.removeAllRanges(),h}};a.rangeCount<=1&&setDomSelection();var o=(null===(t=ei.current)||void 0===t?void 0:t.isFlushing())==="action";if(!w||!o){setTimeout(()=>{eo.isUpdatingSelection=!1});return}var i=null,s=requestAnimationFrame(()=>{if(o){var ensureDomSelection=e=>{try{en.toDOMNode(W,W).focus(),setDomSelection(e)}catch(e){}};ensureDomSelection(),i=setTimeout(()=>{ensureDomSelection(!0),eo.isUpdatingSelection=!1})}});return()=>{cancelAnimationFrame(s),i&&clearTimeout(i)}}});var ec=(0,d.useCallback)(e=>{if(ee(),!g&&en.hasEditableTarget(W,e.target)&&!isDOMEventHandled(e,h)){if(ei.current)return ei.current.handleDOMBeforeInput(e);ed.flush(),el.flush();var{selection:t}=W,{inputType:r}=e,n=e.dataTransfer||e.data||void 0,a="insertCompositionText"===r||"deleteCompositionText"===r;if(!(a&&en.isComposing(W))){var o=!1;if("insertText"===r&&t&&u.e6.isCollapsed(t)&&e.data&&1===e.data.length&&/[a-z ]/i.test(e.data)&&0!==t.anchor.offset){o=!0,W.marks&&(o=!1);var{anchor:i}=t,[s,l]=en.toDOMPoint(W,i),d=null===(p=s.parentElement)||void 0===p?void 0:p.closest("a"),c=en.getWindow(W);if(o&&d&&en.hasDOMNode(W,d)){var f,p,v,m,b=null==c?void 0:c.document.createTreeWalker(d,NodeFilter.SHOW_TEXT).lastChild();b===s&&(null===(m=b.textContent)||void 0===m?void 0:m.length)===l&&(o=!1)}if(o&&s.parentElement&&(null==c||null===(v=c.getComputedStyle(s.parentElement))||void 0===v?void 0:v.whiteSpace)==="pre"){var w=u.ML.above(W,{at:i.path,match:e=>u.W_.isElement(e)&&u.ML.isBlock(W,e)});w&&u.NB.string(w[0]).includes("	")&&(o=!1)}}if(!r.startsWith("delete")||r.startsWith("deleteBy")){var[y]=e.getTargetRanges();if(y){var M=en.toSlateRange(W,y,{exactMatch:!1,suppressThrow:!1});if(!t||!u.e6.equals(t,M)){o=!1;var D=!a&&W.selection&&u.ML.rangeRef(W,W.selection);u.YR.select(W,M),D&&z.set(W,D)}}}if(!a){if(o||e.preventDefault(),t&&u.e6.isExpanded(t)&&r.startsWith("delete")){var E=r.endsWith("Backward")?"backward":"forward";u.ML.deleteFragment(W,{direction:E});return}switch(r){case"deleteByComposition":case"deleteByCut":case"deleteByDrag":u.ML.deleteFragment(W);break;case"deleteContent":case"deleteContentForward":u.ML.deleteForward(W);break;case"deleteContentBackward":u.ML.deleteBackward(W);break;case"deleteEntireSoftLine":u.ML.deleteBackward(W,{unit:"line"}),u.ML.deleteForward(W,{unit:"line"});break;case"deleteHardLineBackward":u.ML.deleteBackward(W,{unit:"block"});break;case"deleteSoftLineBackward":u.ML.deleteBackward(W,{unit:"line"});break;case"deleteHardLineForward":u.ML.deleteForward(W,{unit:"block"});break;case"deleteSoftLineForward":u.ML.deleteForward(W,{unit:"line"});break;case"deleteWordBackward":u.ML.deleteBackward(W,{unit:"word"});break;case"deleteWordForward":u.ML.deleteForward(W,{unit:"word"});break;case"insertLineBreak":u.ML.insertSoftBreak(W);break;case"insertParagraph":u.ML.insertBreak(W);break;case"insertFromComposition":case"insertFromDrop":case"insertFromPaste":case"insertFromYank":case"insertReplacementText":case"insertText":"insertFromComposition"===r&&en.isComposing(W)&&(K(!1),q.set(W,!1)),(null==n?void 0:n.constructor.name)==="DataTransfer"?en.insertData(W,n):"string"==typeof n&&(o?U.current.push(()=>u.ML.insertText(W,n)):u.ML.insertText(W,n))}var O=null===(f=z.get(W))||void 0===f?void 0:f.unref();z.delete(W),!O||W.selection&&u.e6.equals(W.selection,O)||u.YR.select(W,O)}}}},[W,el,ee,h,g,ed]),eu=(0,d.useCallback)(e=>{null==e?(el.cancel(),ed.cancel(),B.delete(W),A.delete(W),Y.current&&P&&Y.current.removeEventListener("beforeinput",ec)):P&&e.addEventListener("beforeinput",ec),Y.current=e},[el,ed,W,ec]);ea(()=>{var e=en.getWindow(W);return e.document.addEventListener("selectionchange",ed),()=>{e.document.removeEventListener("selectionchange",ed)}},[ed]);var ef=f([W,[]]),eh=p&&1===W.children.length&&1===Array.from(u.NB.texts(W)).length&&""===u.NB.string(W)&&!_,eg=(0,d.useCallback)(e=>{if(e&&eh){var t;X(null===(t=e.getBoundingClientRect())||void 0===t?void 0:t.height)}else X(void 0)},[eh]);if(eh){var em=u.ML.start(W,[]);ef.push({[G]:!0,placeholder:p,onPlaceholderResize:eg,anchor:em,focus:em})}var{marks:eb}=W;if(eo.hasMarkPlaceholder=!1,W.selection&&u.e6.isCollapsed(W.selection)&&eb){var{anchor:ew}=W.selection,ey=u.NB.leaf(W,ew.path),eD=_objectWithoutProperties(ey,eS);if(!u.xv.equals(ey,eb,{loose:!0})){eo.hasMarkPlaceholder=!0;var ex=Object.fromEntries(Object.keys(eD).map(e=>[e,null]));ef.push(_objectSpread$1(_objectSpread$1(_objectSpread$1({[Q]:!0},ex),eb),{},{anchor:ew,focus:ew}))}}return(0,d.useEffect)(()=>{setTimeout(()=>{var{selection:e}=W;if(e){var{anchor:t}=e,r=u.NB.leaf(W,t.path);if(eb&&!u.xv.equals(r,eb,{loose:!0})){H.set(W,eb);return}}H.delete(W)})}),d.createElement(ev.Provider,{value:g},d.createElement(ep.Provider,{value:f},d.createElement(eE,{node:Y,receivedUserInput:et},d.createElement(R,_objectSpread$1(_objectSpread$1({role:g?void 0:"textbox","aria-multiline":!g||void 0},j),{},{spellCheck:(!!P||!L)&&j.spellCheck,autoCorrect:P||!L?j.autoCorrect:"false",autoCapitalize:P||!L?j.autoCapitalize:"false","data-slate-editor":!0,"data-slate-node":"value",contentEditable:!g,zindex:-1,suppressContentEditableWarning:!0,ref:eu,style:_objectSpread$1(_objectSpread$1({},T?{}:_objectSpread$1({position:"relative",whiteSpace:"pre-wrap",wordWrap:"break-word"},Z?{minHeight:Z}:{})),S),onBeforeInput:(0,d.useCallback)(e=>{if(!P&&!g&&!isEventHandled(e,j.onBeforeInput)&&en.hasSelectableTarget(W,e.target)&&(e.preventDefault(),!en.isComposing(W))){var t=e.data;u.ML.insertText(W,t)}},[j.onBeforeInput,W,g]),onInput:(0,d.useCallback)(e=>{if(!isEventHandled(e,j.onInput)){if(ei.current){ei.current.handleInput();return}for(var t of U.current)t();U.current=[]}},[j.onInput]),onBlur:(0,d.useCallback)(e=>{if(!(g||eo.isUpdatingSelection||!en.hasSelectableTarget(W,e.target)||isEventHandled(e,j.onBlur))){var t=en.findDocumentOrShadowRoot(W);if(eo.latestElement!==t.activeElement){var{relatedTarget:r}=e;if(!(r===en.toDOMNode(W,W)||isDOMElement(r)&&r.hasAttribute("data-slate-spacer"))){if(null!=r&&isDOMNode(r)&&en.hasDOMNode(W,r)){var n=en.toSlateNode(W,r);if(u.W_.isElement(n)&&!W.isVoid(n))return}if(M){var a=t.getSelection();null==a||a.removeAllRanges()}I.delete(W)}}}},[g,eo.isUpdatingSelection,eo.latestElement,W,j.onBlur]),onClick:(0,d.useCallback)(e=>{if(en.hasTarget(W,e.target)&&!isEventHandled(e,j.onClick)&&isDOMNode(e.target)){var t=en.toSlateNode(W,e.target),r=en.findPath(W,t);if(u.ML.hasPath(W,r)&&u.NB.get(W,r)===t){if(3===e.detail&&r.length>=1){var n=r;if(!(u.W_.isElement(t)&&u.ML.isBlock(W,t))){var a,o=u.ML.above(W,{match:e=>u.W_.isElement(e)&&u.ML.isBlock(W,e),at:r});n=null!==(a=null==o?void 0:o[1])&&void 0!==a?a:r.slice(0,1)}var i=u.ML.range(W,n);u.YR.select(W,i);return}if(!g){var s=u.ML.start(W,r),l=u.ML.end(W,r),d=u.ML.void(W,{at:s}),c=u.ML.void(W,{at:l});if(d&&c&&u.y$.equals(d[1],c[1])){var f=u.ML.range(W,s);u.YR.select(W,f)}}}}},[W,j.onClick,g]),onCompositionEnd:(0,d.useCallback)(e=>{if(en.hasSelectableTarget(W,e.target)){var t;if(en.isComposing(W)&&(K(!1),q.set(W,!1)),null===(t=ei.current)||void 0===t||t.handleCompositionEnd(e),!isEventHandled(e,j.onCompositionEnd)&&!w&&!M&&!x&&!m&&!k&&!C&&e.data){var r=H.get(W);H.delete(W),void 0!==r&&(V.set(W,W.marks),W.marks=r),u.ML.insertText(W,e.data);var n=V.get(W);V.delete(W),void 0!==n&&(W.marks=n)}}},[j.onCompositionEnd,W]),onCompositionUpdate:(0,d.useCallback)(e=>{!en.hasSelectableTarget(W,e.target)||isEventHandled(e,j.onCompositionUpdate)||en.isComposing(W)||(K(!0),q.set(W,!0))},[j.onCompositionUpdate,W]),onCompositionStart:(0,d.useCallback)(e=>{if(en.hasSelectableTarget(W,e.target)&&(null===(t=ei.current)||void 0===t||t.handleCompositionStart(e),!isEventHandled(e,j.onCompositionStart)&&!w)){K(!0);var t,{selection:r}=W;if(r){if(u.e6.isExpanded(r)){u.ML.deleteFragment(W);return}var n=u.ML.above(W,{match:e=>u.W_.isElement(e)&&u.ML.isInline(W,e),mode:"highest"});if(n){var[,a]=n;if(u.ML.isEnd(W,r.anchor,a)){var o=u.ML.after(W,a);u.YR.setSelection(W,{anchor:o,focus:o})}}}}},[j.onCompositionStart,W]),onCopy:(0,d.useCallback)(e=>{!en.hasSelectableTarget(W,e.target)||isEventHandled(e,j.onCopy)||isDOMEventTargetInput(e)||(e.preventDefault(),en.setFragmentData(W,e.clipboardData,"copy"))},[j.onCopy,W]),onCut:(0,d.useCallback)(e=>{if(!g&&en.hasSelectableTarget(W,e.target)&&!isEventHandled(e,j.onCut)&&!isDOMEventTargetInput(e)){e.preventDefault(),en.setFragmentData(W,e.clipboardData,"cut");var{selection:t}=W;if(t){if(u.e6.isExpanded(t))u.ML.deleteFragment(W);else{var r=u.NB.parent(W,t.anchor.path);u.ML.isVoid(W,r)&&u.YR.delete(W)}}}},[g,W,j.onCut]),onDragOver:(0,d.useCallback)(e=>{if(en.hasTarget(W,e.target)&&!isEventHandled(e,j.onDragOver)){var t=en.toSlateNode(W,e.target);u.W_.isElement(t)&&u.ML.isVoid(W,t)&&e.preventDefault()}},[j.onDragOver,W]),onDragStart:(0,d.useCallback)(e=>{if(!g&&en.hasTarget(W,e.target)&&!isEventHandled(e,j.onDragStart)){var t=en.toSlateNode(W,e.target),r=en.findPath(W,t);if(u.W_.isElement(t)&&u.ML.isVoid(W,t)||u.ML.void(W,{at:r,voids:!0})){var n=u.ML.range(W,r);u.YR.select(W,n)}eo.isDraggingInternally=!0,en.setFragmentData(W,e.dataTransfer,"drag")}},[g,W,j.onDragStart,eo]),onDrop:(0,d.useCallback)(e=>{if(!g&&en.hasTarget(W,e.target)&&!isEventHandled(e,j.onDrop)){e.preventDefault();var t=W.selection,r=en.findEventRange(W,e),n=e.dataTransfer;u.YR.select(W,r),eo.isDraggingInternally&&t&&!u.e6.equals(t,r)&&!u.ML.void(W,{at:r,voids:!0})&&u.YR.delete(W,{at:t}),en.insertData(W,n),en.isFocused(W)||en.focus(W)}eo.isDraggingInternally=!1},[g,W,j.onDrop,eo]),onDragEnd:(0,d.useCallback)(e=>{!g&&eo.isDraggingInternally&&j.onDragEnd&&en.hasTarget(W,e.target)&&j.onDragEnd(e),eo.isDraggingInternally=!1},[g,eo,j,W]),onFocus:(0,d.useCallback)(e=>{if(!g&&!eo.isUpdatingSelection&&en.hasEditableTarget(W,e.target)&&!isEventHandled(e,j.onFocus)){var t=en.toDOMNode(W,W),r=en.findDocumentOrShadowRoot(W);if(eo.latestElement=r.activeElement,y&&e.target!==t){t.focus();return}I.set(W,!0)}},[g,eo,W,j.onFocus]),onKeyDown:(0,d.useCallback)(e=>{if(!g&&en.hasEditableTarget(W,e.target)){null===(t=ei.current)||void 0===t||t.handleKeyDown(e);var t,{nativeEvent:r}=e;if(en.isComposing(W)&&!1===r.isComposing&&(q.set(W,!1),K(!1)),!(isEventHandled(e,j.onKeyDown)||en.isComposing(W))){var{selection:n}=W,o=W.children[null!==n?n.focus.path[0]:0],i="rtl"===a()(u.NB.string(o));if(eM.isRedo(r)){e.preventDefault(),"function"==typeof W.redo&&W.redo();return}if(eM.isUndo(r)){e.preventDefault(),"function"==typeof W.undo&&W.undo();return}if(eM.isMoveLineBackward(r)){e.preventDefault(),u.YR.move(W,{unit:"line",reverse:!0});return}if(eM.isMoveLineForward(r)){e.preventDefault(),u.YR.move(W,{unit:"line"});return}if(eM.isExtendLineBackward(r)){e.preventDefault(),u.YR.move(W,{unit:"line",edge:"focus",reverse:!0});return}if(eM.isExtendLineForward(r)){e.preventDefault(),u.YR.move(W,{unit:"line",edge:"focus"});return}if(eM.isMoveBackward(r)){e.preventDefault(),n&&u.e6.isCollapsed(n)?u.YR.move(W,{reverse:!i}):u.YR.collapse(W,{edge:"start"});return}if(eM.isMoveForward(r)){e.preventDefault(),n&&u.e6.isCollapsed(n)?u.YR.move(W,{reverse:i}):u.YR.collapse(W,{edge:"end"});return}if(eM.isMoveWordBackward(r)){e.preventDefault(),n&&u.e6.isExpanded(n)&&u.YR.collapse(W,{edge:"focus"}),u.YR.move(W,{unit:"word",reverse:!i});return}if(eM.isMoveWordForward(r)){e.preventDefault(),n&&u.e6.isExpanded(n)&&u.YR.collapse(W,{edge:"focus"}),u.YR.move(W,{unit:"word",reverse:i});return}if(P){if((E||M)&&n&&(eM.isDeleteBackward(r)||eM.isDeleteForward(r))&&u.e6.isCollapsed(n)){var s=u.NB.parent(W,n.anchor.path);if(u.W_.isElement(s)&&u.ML.isVoid(W,s)&&(u.ML.isInline(W,s)||u.ML.isBlock(W,s))){e.preventDefault(),u.ML.deleteBackward(W,{unit:"block"});return}}}else{if(eM.isBold(r)||eM.isItalic(r)||eM.isTransposeCharacter(r)){e.preventDefault();return}if(eM.isSoftBreak(r)){e.preventDefault(),u.ML.insertSoftBreak(W);return}if(eM.isSplitBlock(r)){e.preventDefault(),u.ML.insertBreak(W);return}if(eM.isDeleteBackward(r)){e.preventDefault(),n&&u.e6.isExpanded(n)?u.ML.deleteFragment(W,{direction:"backward"}):u.ML.deleteBackward(W);return}if(eM.isDeleteForward(r)){e.preventDefault(),n&&u.e6.isExpanded(n)?u.ML.deleteFragment(W,{direction:"forward"}):u.ML.deleteForward(W);return}if(eM.isDeleteLineBackward(r)){e.preventDefault(),n&&u.e6.isExpanded(n)?u.ML.deleteFragment(W,{direction:"backward"}):u.ML.deleteBackward(W,{unit:"line"});return}if(eM.isDeleteLineForward(r)){e.preventDefault(),n&&u.e6.isExpanded(n)?u.ML.deleteFragment(W,{direction:"forward"}):u.ML.deleteForward(W,{unit:"line"});return}if(eM.isDeleteWordBackward(r)){e.preventDefault(),n&&u.e6.isExpanded(n)?u.ML.deleteFragment(W,{direction:"backward"}):u.ML.deleteBackward(W,{unit:"word"});return}if(eM.isDeleteWordForward(r)){e.preventDefault(),n&&u.e6.isExpanded(n)?u.ML.deleteFragment(W,{direction:"forward"}):u.ML.deleteForward(W,{unit:"word"});return}}}}},[g,W,j.onKeyDown]),onPaste:(0,d.useCallback)(e=>{!g&&en.hasEditableTarget(W,e.target)&&!isEventHandled(e,j.onPaste)&&(!P||isPlainTextOnlyPaste(e.nativeEvent)||M)&&(e.preventDefault(),en.insertData(W,e.clipboardData))},[g,W,j.onPaste])}),d.createElement(Children,{decorations:ef,node:W,renderElement:v,renderPlaceholder:D,renderLeaf:b,selection:W.selection})))))},DefaultPlaceholder=e=>{var{attributes:t,children:r}=e;return d.createElement("span",_objectSpread$1({},t),r,w&&d.createElement("br",null))},defaultDecorate=()=>[],defaultScrollSelectionIntoView=(e,t)=>{if(t.getBoundingClientRect&&(!e.selection||e.selection&&u.e6.isCollapsed(e.selection))){var r=t.startContainer.parentElement;r.getBoundingClientRect=t.getBoundingClientRect.bind(t),(0,c.Z)(r,{scrollMode:"if-needed"}),delete r.getBoundingClientRect}},isEventHandled=(e,t)=>{if(!t)return!1;var r=t(e);return null!=r?r:e.isDefaultPrevented()||e.isPropagationStopped()},isDOMEventTargetInput=e=>isDOMNode(e.target)&&(e.target instanceof HTMLInputElement||e.target instanceof HTMLTextAreaElement),isDOMEventHandled=(e,t)=>{if(!t)return!1;var r=t(e);return null!=r?r:e.defaultPrevented},ex=(0,d.createContext)(!1),eC=(0,d.createContext)({}),ek=["editor","children","onChange","onSelectionChange","onValueChange","initialValue"],Slate=e=>{var t,r,n,{editor:a,children:o,onChange:i,onSelectionChange:s,onValueChange:l,initialValue:c}=e,f=_objectWithoutProperties(e,ek),[h,p]=d.useState(()=>{if(!u.NB.isNodeList(c))throw Error("[Slate] initialValue is invalid! Expected a list of elements but got: ".concat(u.o4.stringify(c)));if(!u.ML.isEditor(a))throw Error("[Slate] editor is invalid! You passed: ".concat(u.o4.stringify(a)));return a.children=c,Object.assign(a,f),{v:0,editor:a}}),{selectorContext:m,onChange:b}=(t=(0,d.useRef)([]).current,r=(0,d.useRef)({editor:a}).current,n=(0,d.useCallback)(e=>{r.editor=e,t.forEach(t=>t(e))},[t,r]),{selectorContext:(0,d.useMemo)(()=>({getSlate:()=>r.editor,addEventListener:e=>(t.push(e),()=>{t.splice(t.indexOf(e),1)})}),[t,r]),onChange:n}),w=(0,d.useCallback)(e=>{var t;(i&&i(a.children),(null==e||null===(t=e.operation)||void 0===t?void 0:t.type)==="set_selection")?null==s||s(a.selection):null==l||l(a.children),p(e=>({v:e.v+1,editor:a})),b(a)},[a,b,i,s,l]);(0,d.useEffect)(()=>(K.set(a,w),()=>{K.set(a,()=>{})}),[a,w]);var[y,M]=(0,d.useState)(en.isFocused(a));return(0,d.useEffect)(()=>{M(en.isFocused(a))},[a]),ea(()=>{var fn=()=>M(en.isFocused(a));return v>=17?(document.addEventListener("focusin",fn),document.addEventListener("focusout",fn),()=>{document.removeEventListener("focusin",fn),document.removeEventListener("focusout",fn)}):(document.addEventListener("focus",fn,!0),document.addEventListener("blur",fn,!0),()=>{document.removeEventListener("focus",fn,!0),document.removeEventListener("blur",fn,!0)})},[]),d.createElement(eC.Provider,{value:m},d.createElement(em.Provider,{value:h},d.createElement(g.Provider,{value:h.editor},d.createElement(ex.Provider,{value:y},o))))},doRectsIntersect=(e,t)=>{var r=(t.top+t.bottom)/2;return e.top<=r&&e.bottom>=r},areRangesSameLine=(e,t,r)=>{var n=en.toDOMRange(e,t).getBoundingClientRect(),a=en.toDOMRange(e,r).getBoundingClientRect();return doRectsIntersect(n,a)&&doRectsIntersect(a,n)},findCurrentLineRange=(e,t)=>{var r=u.ML.range(e,u.e6.end(t)),n=Array.from(u.ML.positions(e,{at:t})),a=0,o=n.length,i=Math.floor(o/2);if(areRangesSameLine(e,u.ML.range(e,n[a]),r))return u.ML.range(e,n[a],r);if(n.length<2)return u.ML.range(e,n[n.length-1],r);for(;i!==n.length&&i!==a;)areRangesSameLine(e,u.ML.range(e,n[i]),r)?o=i:a=i,i=Math.floor((a+o)/2);return u.ML.range(e,n[o],r)};function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach(function(t){_defineProperty(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var withReact=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"x-slate-fragment",{apply:r,onChange:n,deleteBackward:a,addMark:o,removeMark:i}=e;return _.set(e,new WeakMap),e.addMark=(t,r)=>{var n,a;null===(n=Y.get(e))||void 0===n||n(),!H.get(e)&&null!==(a=U.get(e))&&void 0!==a&&a.length&&H.set(e,null),V.delete(e),o(t,r)},e.removeMark=t=>{var r;!H.get(e)&&null!==(r=U.get(e))&&void 0!==r&&r.length&&H.set(e,null),V.delete(e),i(t)},e.deleteBackward=t=>{if("line"!==t)return a(t);if(e.selection&&u.e6.isCollapsed(e.selection)){var r=u.ML.above(e,{match:t=>u.W_.isElement(t)&&u.ML.isBlock(e,t),at:e.selection});if(r){var[,n]=r,o=u.ML.range(e,n,e.selection.anchor),i=findCurrentLineRange(e,o);u.e6.isCollapsed(i)||u.YR.delete(e,{at:i})}}},e.apply=t=>{var n=[],a=[],o=U.get(e);if(null!=o&&o.length){var i=o.map(e=>(function(e,t){var{path:r,diff:n,id:a}=e;switch(t.type){case"insert_text":if(!u.y$.equals(t.path,r)||t.offset>=n.end)return e;if(t.offset<=n.start)return{diff:{start:t.text.length+n.start,end:t.text.length+n.end,text:n.text},id:a,path:r};return{diff:{start:n.start,end:n.end+t.text.length,text:n.text},id:a,path:r};case"remove_text":if(!u.y$.equals(t.path,r)||t.offset>=n.end)return e;if(t.offset+t.text.length<=n.start)return{diff:{start:n.start-t.text.length,end:n.end-t.text.length,text:n.text},id:a,path:r};return{diff:{start:n.start,end:n.end-t.text.length,text:n.text},id:a,path:r};case"split_node":if(!u.y$.equals(t.path,r)||t.position>=n.end)return{diff:n,id:a,path:u.y$.transform(r,t,{affinity:"backward"})};if(t.position>n.start)return{diff:{start:n.start,end:Math.min(t.position,n.end),text:n.text},id:a,path:r};return{diff:{start:n.start-t.position,end:n.end-t.position,text:n.text},id:a,path:u.y$.transform(r,t,{affinity:"forward"})};case"merge_node":if(!u.y$.equals(t.path,r))return{diff:n,id:a,path:u.y$.transform(r,t)};return{diff:{start:n.start+t.position,end:n.end+t.position,text:n.text},id:a,path:u.y$.transform(r,t)}}var o=u.y$.transform(r,t);return o?{diff:n,path:o,id:a}:null})(e,t)).filter(Boolean);U.set(e,i)}var s=X.get(e);s&&X.set(e,transformPendingRange(e,s,t));var l=Z.get(e);if(null!=l&&l.at){var d=u.E9.isPoint(null==l?void 0:l.at)?transformPendingPoint(e,l.at,t):transformPendingRange(e,l.at,t);Z.set(e,d?_objectSpread(_objectSpread({},l),{},{at:d}):null)}switch(t.type){case"insert_text":case"remove_text":case"set_node":case"split_node":n.push(...getMatches(e,t.path));break;case"set_selection":null===(c=z.get(e))||void 0===c||c.unref(),z.delete(e);break;case"insert_node":case"remove_node":n.push(...getMatches(e,u.y$.parent(t.path)));break;case"merge_node":n.push(...getMatches(e,u.y$.previous(t.path)));break;case"move_node":n.push(...getMatches(e,u.y$.common(u.y$.parent(t.path),u.y$.parent(t.newPath)))),u.y$.isBefore(t.path,t.newPath)?(n.push(...getMatches(e,u.y$.parent(t.path))),f=t.newPath):(n.push(...getMatches(e,u.y$.parent(t.newPath))),f=t.path);var c,f,h=u.NB.get(e,u.y$.parent(f)),p=en.findKey(e,h);a.push([u.ML.pathRef(e,u.y$.parent(f)),p])}for(var[g,v]of(r(t),n)){var[m]=u.ML.node(e,g);W.set(m,v)}for(var[b,w]of a)if(b.current){var[y]=u.ML.node(e,b.current);W.set(y,w)}},e.setFragmentData=r=>{var{selection:n}=e;if(n){var[a,o]=u.e6.edges(n),i=u.ML.void(e,{at:a.path}),s=u.ML.void(e,{at:o.path});if(!u.e6.isCollapsed(n)||i){var l=en.toDOMRange(e,n),d=l.cloneContents(),c=d.childNodes[0];if(d.childNodes.forEach(e=>{e.textContent&&""!==e.textContent.trim()&&(c=e)}),s){var[f]=s,h=l.cloneRange(),p=en.toDOMNode(e,f);h.setEndAfter(p),d=h.cloneContents()}if(i&&(c=d.querySelector("[data-slate-spacer]")),Array.from(d.querySelectorAll("[data-slate-zero-width]")).forEach(e=>{var t="n"===e.getAttribute("data-slate-zero-width");e.textContent=t?"\n":""}),isDOMText(c)){var g=c.ownerDocument.createElement("span");g.style.whiteSpace="pre",g.appendChild(c),d.appendChild(g),c=g}var v=JSON.stringify(e.getFragment()),m=window.btoa(encodeURIComponent(v));c.setAttribute("data-slate-fragment",m),r.setData("application/".concat(t),m);var b=d.ownerDocument.createElement("div");return b.appendChild(d),b.setAttribute("hidden","true"),d.ownerDocument.body.appendChild(b),r.setData("text/html",b.innerHTML),r.setData("text/plain",getPlainText(b)),d.ownerDocument.body.removeChild(b),r}}},e.insertData=t=>{e.insertFragmentData(t)||e.insertTextData(t)},e.insertFragmentData=r=>{var n=r.getData("application/".concat(t))||getSlateFragmentAttribute(r);if(n){var a=JSON.parse(decodeURIComponent(window.atob(n)));return e.insertFragment(a),!0}return!1},e.insertTextData=t=>{var r=t.getData("text/plain");if(r){var n=r.split(/\r\n|\r|\n/),a=!1;for(var o of n)a&&u.YR.splitNodes(e,{always:!0}),e.insertText(o),a=!0;return!0}return!1},e.onChange=t=>{(v<18?p.unstable_batchedUpdates:e=>e())(()=>{var r=K.get(e);r&&r(t),n(t)})},e},getMatches=(e,t)=>{var r=[];for(var[n,a]of u.ML.levels(e,{at:t})){var o=en.findKey(e,n);r.push([a,o])}return r}}}]);